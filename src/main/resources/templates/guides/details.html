<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security6">

<head th:replace="~{fragments/head :: head}"></head>
<body>

<div th:replace="~{fragments/navbar :: navbar}"></div>

<main class="container">
    <h1 th:text="${guide.title}"></h1>

    <p>
        <strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong>
        <span th:text="${guide.category}"></span>
    </p>

    <!-- –ö–Ω–æ–ø–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã—Ö -->
    <div sec:authorize="isAuthenticated()">
        <a th:href="@{|/guides/${guide.id}/edit|}" class="btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>

        <form th:action="@{|/guides/${guide.id}/delete|}"
              method="post"
              style="display:inline">
            <button type="submit" class="btn btn-danger">
                –£–¥–∞–ª–∏—Ç—å
            </button>
        </form>
    </div>

    <p>
        <strong>–ê–≤—Ç–æ—Ä:</strong>
        <span th:if="${guide.author == null}">–Ω–µ —É–∫–∞–∑–∞–Ω</span>
        <a th:if="${guide.author != null}"
           th:text="${guide.author.username}"
           th:href="@{'/profile?user=' + ${guide.author.id}}">
        </a>
    </p>

    <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong></p>
    <p th:text="${guide.description}"></p>

    <!-- –õ–ê–ô–ö–ò -->
    <div class="likes-block" style="margin-top:20px;">

        <p>
            <strong>–õ–∞–π–∫–æ–≤:</strong>
            <span th:text="${likeCount}">0</span>
        </p>

        <!-- –¢–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö -->
        <div sec:authorize="isAuthenticated()">

            <!-- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –ª–∞–π–∫–Ω—É–ª -->
            <form th:if="${userLiked}"
                  th:action="@{|/guides/${guide.id}/unlike|}"
                  method="post"
                  style="display:inline;">
                <button type="submit" class="btn btn-warning">–£–±—Ä–∞—Ç—å –ª–∞–π–∫ üíî</button>
            </form>

            <!-- –ï—Å–ª–∏ –Ω–µ –ª–∞–π–∫–Ω—É–ª -->
            <form th:if="${!userLiked}"
                  th:action="@{|/guides/${guide.id}/like|}"
                  method="post"
                  style="display:inline;">
                <button type="submit" class="btn btn-primary">–õ–∞–π–∫–Ω—É—Ç—å ‚ù§Ô∏è</button>
            </form>

        </div>

    </div>

    <a href="/guides" class="secondary">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –≥–∞–π–¥–æ–≤</a>
</main>

<footer th:replace="~{fragments/footer :: footer}"></footer>

</body>
</html>
